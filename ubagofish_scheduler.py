<THE FULL PYTHON CODE AS COMPILED ABOVE, IDENTICAL TO LAST MESSAGE>